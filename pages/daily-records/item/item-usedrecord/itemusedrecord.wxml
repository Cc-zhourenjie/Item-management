<!--pages/daily-records/item/item-usedrecord/itemusedrecord.wxml-->
<view class="container">
    <!-- æœç´¢å’Œç­›é€‰åŒºåŸŸ -->
    <view class="search-section">
        <input class="search-input" placeholder="è¾“å…¥ç‰©å“åç§°" />
        <button class="filter-btn">ç‰©å“åˆ†ç±»</button>
        <button class="search-btn">æœç´¢</button>
    </view>

    <!-- æ—¥å†å¯¼èˆª -->
    <view class="calendar-nav">
        <button class="nav-btn prev-btn" bindtap="prevMonth">â€¹</button>
        <text class="month-text">{{currentYear}}å¹´{{currentMonth}}æœˆ</text>
        <button class="nav-btn next-btn" bindtap="nextMonth">â€º</button>
    </view>

    <!-- æ—¥å†ç½‘æ ¼ -->
    <view class="calendar-container">
        <!-- æ˜ŸæœŸæ ‡é¢˜ -->
        <view class="week-header">
            <text class="week-day">ä¸€</text>
            <text class="week-day">äºŒ</text>
            <text class="week-day">ä¸‰</text>
            <text class="week-day">å››</text>
            <text class="week-day">äº”</text>
            <text class="week-day weekend">å…­</text>
            <text class="week-day weekend">æ—¥</text>
        </view>

        <!-- æ—¥æœŸç½‘æ ¼ -->
        <view class="calendar-grid">
            <view
                class="calendar-day {{item.isCurrentMonth ? 'current-month' : 'other-month'}} {{item.isToday ? 'today' : ''}} {{item.isWeekend ? 'weekend' : ''}}"
                wx:for="{{calendarDays}}" wx:key="index" bindtap="selectDate" data-date="{{item.date}}">
                <text class="day-number">{{item.day}}</text>
                <view class="day-records" wx:if="{{item.records && item.records.length > 0}}">
                    <view class="record-tag" wx:for="{{item.records}}" wx:for-item="record" wx:key="index"
                        style="background-color: {{record.color}}">
                        <text class="record-name">{{record.name}}</text>
                        <text class="record-amount">{{record.amount}}</text>
                    </view>
                    <text class="more-records" wx:if="{{item.records.length > 3}}">ç­‰{{item.records.length -
                        3}}ä¸ª...</text>
                </view>
                <text class="no-records" wx:else>æ— </text>
            </view>
        </view>
    </view>



    <!-- ä½¿ç”¨è®°å½•åˆ—è¡¨ -->
    <scroll-view class="records-list" scroll-y>
        <view class="list-header">
            <text class="summary-title">æœ¬æœˆä½¿ç”¨è®°å½•</text>
            <text class="total-amount">æ¶ˆè´¹æ€»é¢: Â¥{{totalAmount}}</text>
        </view>
        <view class="record-item" wx:for="{{usageRecords}}" wx:key="index">
            <view class="record-icon">
                <view class="icon-container">
                    <text class="icon-text">ğŸ“¦</text>
                </view>
            </view>
            <view class="record-content">
                <text class="item-name">{{item.name}}</text>
                <text class="usage-quantity">ä½¿ç”¨æ•°é‡:{{item.quantity}}</text>
                <text class="usage-time">{{item.time}}</text>
            </view>
        </view>
    </scroll-view>
</view>